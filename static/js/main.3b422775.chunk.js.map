{"version":3,"sources":["i18n.js","constants.js","reducers/appReducer.js","reducers/index.js","lsApi.js","api.js","sagas/appSagas.js","sagas/index.js","store.js","containers/PrivateRouter/index.js","components/MainPage.js","containers/MainPage/index.js","components/Menu/index.js","actions/settings.js","components/DialogsList.js","containers/DialogsList/index.js","components/Wrapper/index.js","containers/Authorize/index.js","actions/app.js","components/Settings.js","components/SettingsView.js","containers/Settings/index.js","components/items/Comment.js","components/svg/send_button.js","components/Dialogs.js","components/DialogsView.js","containers/Dialogs/index.js","components/forms/managers/addManagerForm.js","components/Managers.js","components/ManagersView.js","containers/Managers/index.js","components/Requests.js","components/RequestsView.js","containers/Requests/index.js","router.js","serviceWorker.js","index.js"],"names":["resources","en","translation","ru","i18n","use","detector","reactI18nextModule","init","fallbackLng","interpolation","escapeValue","SET_AUTHORIZE","FETCH_SETTINGS_REQUEST","FETCH_SETTINGS_SUCCESS","SAVE_SETTINGS_REQUEST","SAVE_SETTINGS_SUCCESS","FETCH_MANAGERS_REQUEST","FETCH_MANAGERS_SUCCESS","ADD_MANAGER_REQUEST","ADD_MANAGER_SUCCESS","ADD_MANAGER_ERROR","REMOVE_MANAGER_REQUEST","REMOVE_MANAGER_SUCCESS","FETCH_DIALOGS_REQUEST","FETCH_DIALOGS_SUCCESS","LOADER_ON","LOADER_OFF","FETCH_DIALOG_REQUEST","FETCH_DIALOG_SUCCESS","SEND_MESSAGE_REQUEST","SEND_MESSAGE_SUCCESS","SOCKET_ROOMS_CHANGED_EVENT","LOADER_TURN_OFF","FETCH_ROLE_REQUEST","FETCH_ROLE_SUCCESS","FETCH_REQUESTS_REQUEST","FETCH_REQUESTS_SUCCESS","DELETE_REQUESTS_REQUEST","DELETE_REQUESTS_SUCCESS","FETCH_CONFIG_SUCCESS","initialState","user","messages","message","dialogs","loader","messagesCount","currentRoom","currentPage","requests","reducers","app","state","arguments","length","undefined","action","type","Object","objectSpread","data","widgetSettings","managers","result","error_message","_","room","reverse","lastMessage","fields","args","_id","rid","toConsumableArray","concat","role","config","router","routerReducer","getDialogs","lsDialogs","localStorage","getItem","str","JSON","parse","e","isJson","setDialogs","setItem","stringify","forEach","dialog","updateDialogs","_dialog","removeDialog","push","addDialog","getDialogsNmsgs","lsDialog","msgs","nmsgs","readDialog","getUrl","processId","companyId","path","getRocketChatHeaders","json","_JSON$parse$data","Content-Type","X-Auth-Token","authToken","X-User-Id","userId","getHeadera","Authorization","token","accept","backApiProcessId","frontApiProcessId","commentsPerPage","fetchConfig","getXauthToken","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","uri","wrap","_context","prev","next","axios","get","headers","sent","abrupt","t0","stop","this","apply","fetchSettings","_ref2","_callee2","_context2","companyName","widget","settings","saveSettings","_ref3","_callee3","_context3","post","isActive","color","openChat","telegram_token","telegram_bot_name","viber_token","viber_bot_name","sms_token","sms_phone","vk_token","vk_group_name","vk_confirmation_code","fbm_api_key","fbm_secret","fbm_page","_x","fetchManagers","_ref4","_callee4","_context4","addManager","_ref5","_callee5","_context5","email","nickname","password","_x2","removeManager","_ref6","_callee6","_context6","id","username","_x3","fetchDialogs","_ref7","_callee7","_context7","groups","fetchDialog","_ref8","_callee8","_context8","params","_x4","fetchGroupInfo","_ref10","_callee10","_context10","_x5","deleteRequest","_ref11","_callee11","_context11","_x6","fetchRole","_ref12","_callee12","_context12","sendMessageSaga","_ref13","_callee13","text","_context13","method","url","roomId","_x7","_x8","websocketInitRoomsChanged","Xuser","eventChannel","emitter","options","endpoint","SocketConstructor","WebSocket","ddp","DDP","on","resume","sub","fetchDialogSaga","fetchDialogsSaga","removeManagerSaga","addManagerSaga","fetchManagersSaga","saveSettingsSaga","fetchSettingsSaga","loginSaga","loaderOff","fetchRoleSaga","fetchRequestsSaga","deleteRequestSaga","ordersSaga","takeLatest","_action$data","Api","lsApi","status","put","_marked","groupInfo","unreads","count","group","_marked2","socket","_action","_dialogs","call","take","_marked3","error","_marked4","_context9","_marked5","value","key","String","number","_marked6","_context14","_marked7","_context16","_context15","t1","t2","t3","t4","t5","t6","t7","t8","_marked8","_context18","_callee9","_context17","removeItem","_marked9","_context20","_context19","_marked10","_context22","_context21","_marked11","_context24","_context23","roomName","time","ts","Date","$date","toLocaleDateString","toLocaleTimeString","_marked12","_context26","i","_context25","msgId","_marked13","_context27","fork","_marked14","rootSaga","appSagas","sagas_marked","history","createHistory","sagaMiddleware","createSagaMiddleware","store","createStore","combineReducers","applyMiddleware","thunk","routerMiddleware","run","withRouter","connect","ownProps","Component","component","rest","objectWithoutProperties","react_default","createElement","Route","assign","render","props","window","location","href","MainPageView","React","MainPage","MainPage_MainPageView","MenuPanel","currentMenuKey","pathname","setState","t","menu","theme","mode","defaultSelectedKeys","toString","Item","Link","to","icon","withNamespaces","Menu_MenuPanel","Sider","Layout","Search","Input","DialogsListMenu","searchDialogText","_this","_this2","menuItems","item","name","split","companyid","_fetchDialog","replace","search","onClick","bind","className","avatar","size","substring","tag","style","display","dialogsListShow","placeholder","onSearch","searchDialog","dispatch","components_DialogsList","Header","Content","Wrapper","collapsed","changeLanguage","lng","toggle","_this$props","contentClass","lngMenu","layout","Wrapper_Sider","trigger","collapsible","Menu","containers_DialogsList","dropdown","overlay","children","spin","spinning","delay","Wrapper_Wrapper","Authorize","substr","param","transform","hash","setAuthorize","FormItem","Form","RadioGroup","Radio","Group","Panel","Collapse","RegistrationForm","widgetCode","handleSubmit","preventDefault","form","validateFieldsAndScroll","err","values","event","setFieldsValue","hex","textArea","document","body","appendChild","focus","select","execCommand","success","removeChild","getFieldDecorator","es_alert","borderRadius","es_button","fallbackCopyTextToClipboard","es_form","onSubmit","label","initialValue","rules","required","input","es_radio","colorR","lib","onChangeComplete","handleChange","collapse","bordered","accordion","defaultActiveKey","onChange","callback","header","htmlType","create","SettinggsView","components_Settings","SettingsView_SettinggsView","CommentItem","client","list","dataSource","renderItem","u","shortName","file","fileLink","height","src","alt","comment","author","backgroundColor","content","Parser","msg","datetime","tooltip","title","date","lang","day","getDate","month","getMonth","year","getFullYear","hours","getHours","minutes","getMinutes","slice","SendButton","viewBox","width","fill","d","TextArea","scroll","Scroll","DialogsList","classCallCheck","possibleConstructorReturn","getPrototypeOf","hasMore","pageItemsCount","lm","validateFields","userComment","sendMessage","resetFields","fetchData","handleInfiniteOnLoad","warning","scrollTo","duration","scrollToBottom","containerId","scrollToTop","shiftKey","commentConteiner","chatConteiner","chatHeight","tx","getElementsByTagName","setAttribute","scrollHeight","addEventListener","OnInput","setTimeout","getElementsByClassName","clientHeight","_this$props$form","getFieldError","isFieldTouched","userCommentError","row","col","span","overflow","border","react_infinite_scroller_default","initialLoad","isReverse","loadMore","loading","useWindow","threshold","Comment_CommentItem","Dialogs_FormItem","validateStatus","help","marginBottom","onKeyUp","send_button","DialogsListView","components_Dialogs","justify","align","empty","image","description","DialogsView_DialogsListView","AddManagerForm","visible","onCancel","onCreate","formItemLayout","wrapperCol","xs","sm","modal","okText","cancelText","onOk","addManagerForm_FormItem","confirm","Modal","ManagersList","showModal","handleCancel","handleCreate","formRef","saveFormRef","obj","columns","dataIndex","_removeManager","showConfirm","fixed","table","addManagerForm","wrappedComponentRef","ManagersListView","Managers_ManagersList","ManagersView_ManagersListView","RequestsListView","msgsIdToDelete","rowSelection","_onChange","selectedRowKeys","selectedRows","getCheckboxProps","record","disabled","fontSize","x","pagination","hideOnSinglePage","fetchRequests","Requests_RequestsListView","RequestsView_SettinggsView","Router","react_router_redux_es","exact","components_Wrapper","PrivateRouter","Settings","Dialogs","Managers","Requests","Boolean","hostname","match","ReactDOM","react_redux_es","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.3b422775.chunk.js","sourcesContent":["import i18n from \"i18next\";\r\nimport detector from \"i18next-browser-languagedetector\";\r\nimport { reactI18nextModule } from \"react-i18next\";\r\n\r\nimport translationEN from '../src/locales/en/translation.json';\r\nimport translationRU from '../src/locales/ru/translation.json';\r\n\r\n// the translations\r\nconst resources = {\r\n  en: {\r\n    translation: translationEN\r\n  },\r\n  ru: {\r\n    translation: translationRU\r\n  }\r\n};\r\n\r\ni18n\r\n  .use(detector) // auto detect the user language\r\n  .use(reactI18nextModule) // passes i18n down to react-i18next\r\n  .init({\r\n    resources,\r\n    fallbackLng: \"en\", // use en if detected lng is not available\r\n\r\n    //keySeparator: false, // we do not use keys in form messages.welcome\r\n\r\n    interpolation: {\r\n      escapeValue: false // react already safes from xss\r\n    }\r\n  });\r\n\r\nexport default i18n;","export const SET_AUTHORIZE = 'SET_AUTHORIZE';\r\n\r\nexport const FETCH_SETTINGS_REQUEST = 'FETCH_SETTINGS_REQUEST';\r\nexport const FETCH_SETTINGS_SUCCESS = 'FETCH_SETTINGS_SUCCESS';\r\nexport const FETCH_SETTINGS_ERROR = 'FETCH_SETTINGS_ERROR';\r\n\r\nexport const SAVE_SETTINGS_REQUEST = 'SAVE_SETTINGS_REQUEST';\r\nexport const SAVE_SETTINGS_SUCCESS = 'SAVE_SETTINGS_SUCCESS';\r\nexport const SAVE_SETTINGS_ERROR = 'SAVE_SETTINGS_ERROR';\r\n\r\nexport const FETCH_MANAGERS_REQUEST = 'FETCH_MANAGERS_REQUEST';\r\nexport const FETCH_MANAGERS_SUCCESS = 'FETCH_MANAGERS_SUCCESS';\r\nexport const FETCH_MANAGERS_ERROR = 'FETCH_MANAGERS_ERROR';\r\n\r\nexport const ADD_MANAGER_REQUEST = 'ADD_MANAGER_REQUEST';\r\nexport const ADD_MANAGER_SUCCESS = 'ADD_MANAGER_SUCCESS';\r\nexport const ADD_MANAGER_ERROR = 'ADD_MANAGER_ERROR';\r\n\r\nexport const REMOVE_MANAGER_REQUEST = 'REMOVE_MANAGER_REQUEST';\r\nexport const REMOVE_MANAGER_SUCCESS = 'REMOVE_MANAGER_SUCCESS';\r\nexport const REMOVE_MANAGER_ERROR = 'REMOVE_MANAGER_ERROR';\r\n\r\nexport const FETCH_DIALOGS_REQUEST = 'FETCH_DIALOGS_REQUEST';\r\nexport const FETCH_DIALOGS_SUCCESS = 'FETCH_DIALOGS_SUCCESS';\r\nexport const FETCH_DIALOGS_ERROR = 'FETCH_DIALOGS_ERROR';\r\n\r\nexport const LOADER_ON = 'LOADER_ON';\r\nexport const LOADER_OFF = 'LOADER_OFF';\r\n\r\nexport const FETCH_DIALOG_REQUEST = 'FETCH_DIALOG_REQUEST';\r\nexport const FETCH_DIALOG_SUCCESS = 'FETCH_DIALOG_SUCCESS';\r\nexport const FETCH_DIALOG_ERROR = 'FETCH_DIALOG_ERROR';\r\n\r\nexport const SEND_MESSAGE_REQUEST = 'SEND_MESSAGE_REQUEST';\r\nexport const SEND_MESSAGE_SUCCESS = 'SEND_MESSAGE_SUCCESS';\r\nexport const SEND_MESSAGE_ERROR = 'SEND_MESSAGE_ERROR';\r\n\r\nexport const SOCKET_ROOMS_CHANGED_EVENT = 'SOCKET_ROOMS_CHANGED_EVENT';\r\n\r\nexport const LOADER_TURN_OFF = 'LOADER_TURN_OFF';\r\n\r\nexport const FETCH_ROLE_REQUEST = 'FETCH_ROLE_REQUEST';\r\nexport const FETCH_ROLE_SUCCESS = 'FETCH_ROLE_SUCCESS';\r\nexport const FETCH_ROLE_ERROR = 'FETCH_ROLE_ERROR';\r\n\r\nexport const FETCH_REQUESTS_REQUEST = 'FETCH_REQUESTS_REQUEST';\r\nexport const FETCH_REQUESTS_SUCCESS = 'FETCH_REQUESTS_SUCCESS';\r\nexport const FETCH_REQUESTS_ERROR = 'FETCH_REQUESTS_ERROR';\r\n\r\nexport const DELETE_REQUESTS_REQUEST = 'DELETE_REQUESTS_REQUEST';\r\nexport const DELETE_REQUESTS_SUCCESS = 'DELETE_REQUESTS_SUCCESS';\r\nexport const DELETE_REQUESTS_ERROR = 'DELETE_REQUESTS_ERROR';\r\n\r\nexport const FETCH_CONFIG_SUCCESS = 'FETCH_CONFIG_SUCCESS';","import * as _ from 'underscore';\r\nimport {\r\n  SET_AUTHORIZE,\r\n  FETCH_SETTINGS_SUCCESS,\r\n  FETCH_MANAGERS_SUCCESS,\r\n  ADD_MANAGER_SUCCESS, ADD_MANAGER_ERROR,\r\n  REMOVE_MANAGER_SUCCESS,\r\n  FETCH_DIALOGS_SUCCESS,\r\n  LOADER_ON, LOADER_OFF,\r\n  FETCH_DIALOG_SUCCESS,\r\n  SOCKET_ROOMS_CHANGED_EVENT,\r\n  FETCH_ROLE_SUCCESS,\r\n  FETCH_REQUESTS_SUCCESS,\r\n  DELETE_REQUESTS_SUCCESS,\r\n  FETCH_CONFIG_SUCCESS\r\n} from '../constants';\r\nconst initialState = {\r\n  user: null,\r\n  messages: [],\r\n  message: null,\r\n  dialogs: [],\r\n  loader: false,\r\n  messagesCount: null,\r\n  currentRoom: null,\r\n  currentPage: 1,\r\n  requests: []\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case SET_AUTHORIZE:\r\n      return { ...state, user: action.data };\r\n    case FETCH_SETTINGS_SUCCESS:\r\n      return { ...state, widgetSettings: action.widgetSettings };\r\n    case FETCH_MANAGERS_SUCCESS:\r\n      return { ...state, managers: action.managers.managers };\r\n    case ADD_MANAGER_SUCCESS:\r\n      return { ...state, result: action };\r\n    case ADD_MANAGER_ERROR:\r\n      return { ...state, error_message: action.result.data };\r\n    case REMOVE_MANAGER_SUCCESS:\r\n      return { ...state, result: action.result };\r\n    case FETCH_DIALOGS_SUCCESS:\r\n      return { ...state, dialogs: action.dialogs };\r\n    case LOADER_ON:\r\n      return { ...state, loader: true };\r\n    case LOADER_OFF:\r\n      return { ..._.omit(state, 'error_message'), loader: false };\r\n    case FETCH_DIALOG_SUCCESS:\r\n      state.currentRoom = action.data.room;\r\n      state.messagesCount = action.data.messagesCount;\r\n      state.currentPage = 1;\r\n      return { ...state, messages: action.data.messages.reverse() };\r\n    case SOCKET_ROOMS_CHANGED_EVENT:\r\n      let { lastMessage } = action.data.fields.args[1];\r\n      if (lastMessage) {\r\n        let messages = null;\r\n        if (state.currentRoom && state.currentRoom._id === lastMessage.rid) {\r\n          messages = [...state.messages, lastMessage];\r\n        } else {\r\n          messages = state.messages;\r\n        }\r\n        return { ...state, message: lastMessage, messages: messages };\r\n      } else\r\n        return { ...state, message: null, messages: state.messages }\r\n    case FETCH_ROLE_SUCCESS:\r\n      return { ...state, role: action.role };\r\n    case FETCH_REQUESTS_SUCCESS:\r\n      return { ...state, requests: action.messages };\r\n    case DELETE_REQUESTS_SUCCESS:\r\n      return { ...state, result: action };\r\n    case FETCH_CONFIG_SUCCESS:\r\n      return { ...state, config: action.config };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import AppReducer from './appReducer';\r\nimport { routerReducer } from \"react-router-redux\";\r\n\r\nexport default {\r\n    app: AppReducer,\r\n    router: routerReducer\r\n};","import * as _ from 'underscore';\r\n\r\nfunction isJson(str) {\r\n    try {\r\n        JSON.parse(str);\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction getDialogs() {\r\n    let lsDialogs = localStorage.getItem('dialogs');\r\n    lsDialogs = isJson(lsDialogs) ? JSON.parse(lsDialogs) : false;\r\n    if (lsDialogs) {\r\n        return lsDialogs;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction setDialogs(dialogs) {\r\n    let lsDialogs = getDialogs();\r\n    if (dialogs) {\r\n        if (!lsDialogs) {\r\n            localStorage.setItem('dialogs', JSON.stringify(dialogs));\r\n            return true;\r\n        } else {\r\n            lsDialogs.forEach(dialog => {\r\n                let _dialog = _.findIndex(dialogs, { _id: dialog._id });\r\n                if (_dialog === -1) {\r\n                    removeDialog(dialog);\r\n                }\r\n            })\r\n            dialogs.forEach(dialog => {\r\n                let _dialog = _.findIndex(lsDialogs, { _id: dialog._id });\r\n                if (_dialog === -1) {\r\n                    addDialog(dialog);\r\n                }\r\n            })\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction addDialog(dialog) {\r\n    let lsDialogs = getDialogs();\r\n    if (lsDialogs && dialog) {\r\n        lsDialogs.push(dialog);\r\n        updateDialogs(lsDialogs);\r\n    }\r\n}\r\n\r\nfunction removeDialog(dialog) {\r\n    let lsDialogs = getDialogs();\r\n    if (lsDialogs && dialog) {\r\n        updateDialogs(_.filter(lsDialogs, (_dialog) => {\r\n            return _dialog._id !== dialog._id;\r\n        }));\r\n    }\r\n}\r\n\r\nfunction updateDialogs(dialogs) {\r\n    let lsDialogs = getDialogs();\r\n    if (dialogs && lsDialogs) {\r\n        localStorage.setItem('dialogs', JSON.stringify(dialogs));\r\n    }\r\n}\r\n\r\nfunction updateDialog(dialog) {\r\n    let lsDialogs = getDialogs();\r\n    if (dialog && lsDialogs) {\r\n        let _dialog = _.findIndex(lsDialogs, { _id: dialog._id });\r\n        if (_dialog !== -1) {\r\n            lsDialogs[_dialog] = dialog;\r\n            localStorage.setItem('dialogs', JSON.stringify(lsDialogs));\r\n        }\r\n    }\r\n}\r\n\r\nfunction getDialogsNmsgs(dialogs) {\r\n    /*   .  underscore TODO*/\r\n    let lsDialogs = getDialogs();\r\n    if (lsDialogs) {\r\n        lsDialogs.forEach((lsDialog) => {\r\n            let dialog = _.findIndex(dialogs, { _id: lsDialog._id });\r\n            if (dialogs[dialog]) {\r\n                if (dialogs[dialog].msgs > lsDialog.msgs) {\r\n                    dialogs[dialog].nmsgs = dialogs[dialog].msgs - lsDialog.msgs;\r\n                } else {\r\n                    dialogs[dialog].nmsgs = 0;\r\n                }\r\n            }\r\n        })\r\n    }\r\n    return dialogs;\r\n}\r\n\r\nfunction readDialog(dialog) {\r\n    let lsDialogs = getDialogs();\r\n    if (lsDialogs) {\r\n        let lsDialog = _.findIndex(lsDialogs, { _id: dialog._id });\r\n        lsDialogs[lsDialog] = dialog;\r\n        return lsDialogs;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport {\r\n    isJson,\r\n    getDialogs,\r\n    setDialogs,\r\n    getDialogsNmsgs,\r\n    readDialog,\r\n    updateDialogs,\r\n    removeDialog,\r\n    addDialog,\r\n    updateDialog\r\n}","import axios from 'axios';\r\nimport DDP from 'ddp.js';\r\nimport { getDialogsNmsgs } from '../src/lsApi';\r\nimport { eventChannel } from 'redux-saga';\r\n\r\nconst getUrl = (processId, companyId, path) => {\r\n  return `https://api.mixapp.io/webhooks/mixapp/${processId}/${companyId}/${path}`\r\n}\r\n\r\nconst getToken = () => {\r\n  let { token } = JSON.parse(localStorage.getItem('user'));\r\n  return token;\r\n}\r\n\r\nconst getRocketChatHeaders = (json) => {\r\n  let { authToken, userId } = JSON.parse(localStorage.getItem('XUSER')).data;\r\n  return {\r\n    'Content-Type': json ? 'application/json' : '',\r\n    'X-Auth-Token': authToken,\r\n    'X-User-Id': userId\r\n  }\r\n}\r\n\r\nconst getHeadera = () => {\r\n  return {\r\n    'Authorization': 'Bearer ' + getToken(),\r\n    'Content-Type': 'application/json;charset=UTF-8',\r\n    'accept': '*/*'\r\n  }\r\n}\r\n\r\nexport const config = {\r\n  companyId: '5bed9d260dec1f9f4f358399',\r\n  //companyId: '5c581cc10dec1f9f4f3b4b30',\r\n  backApiProcessId: '5bc49dd0574e7403e22ec1a0',\r\n  frontApiProcessId: '5bc49dd735b38203254872a5',\r\n  commentsPerPage: 15\r\n};\r\n\r\nexport const fetchConfig = () => {\r\n  return config;\r\n}\r\n\r\nexport const getXauthToken = async () => {\r\n  try {\r\n    const uri = getUrl(config.backApiProcessId, config.companyId, 'get-token');\r\n    let result = await axios.get(uri, {\r\n      headers: getHeadera()\r\n    });\r\n    return result.data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const fetchSettings = async () => {\r\n  try {\r\n    const uri = getUrl(config.backApiProcessId, config.companyId, 'widget-oidc');\r\n    let result = await axios.get(uri, {\r\n      headers: getHeadera()\r\n    });\r\n    return {\r\n      companyName: result.data.companyName,\r\n      ...result.data.widget,\r\n      ...result.data.settings\r\n    }\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const saveSettings = async (settings) => {\r\n  try {\r\n\r\n    const uri = getUrl(config.backApiProcessId, config.companyId, 'settings');\r\n    let result = await axios.post(uri, {\r\n      \"companyName\": settings.companyName,\r\n      \"widget\": {\r\n        \"isActive\": settings.isActive,\r\n        \"color\": settings.color,\r\n        \"openChat\": settings.openChat\r\n      },\r\n      \"settings\": {\r\n        \"telegram_token\": settings.telegram_token,\r\n        \"telegram_bot_name\": settings.telegram_bot_name,\r\n        \"viber_token\": settings.viber_token,\r\n        \"viber_bot_name\": settings.viber_bot_name,\r\n        \"sms_token\": settings.sms_token,\r\n        \"sms_phone\": settings.sms_phone,\r\n        \"vk_token\": settings.vk_token,\r\n        \"vk_group_name\": settings.vk_group_name,\r\n        \"vk_confirmation_code\": settings.vk_confirmation_code,\r\n        \"fbm_api_key\": settings.fbm_api_key,\r\n        \"fbm_secret\": settings.fbm_secret,\r\n        \"fbm_page\": settings.fbm_page\r\n      }\r\n    }, {\r\n        headers: getHeadera()\r\n      });\r\n    return result;\r\n\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const fetchManagers = async () => {\r\n  try {\r\n    const uri = getUrl(config.backApiProcessId, config.companyId, 'listmanagers');\r\n    let result = await axios.get(uri, {\r\n      headers: getHeadera()\r\n    });\r\n\r\n    return result.data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const addManager = async (data) => {\r\n  try {\r\n    const uri = getUrl(config.backApiProcessId, config.companyId, 'addmanagers');\r\n    let result = await axios.post(uri, {\r\n      \"email\": data.email,\r\n      \"nickname\": data.nickname,\r\n      \"password\": data.password\r\n    }, {\r\n        headers: getHeadera(),\r\n      });\r\n    return result;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const removeManager = async (data) => {\r\n  try {\r\n    const uri = getUrl(config.backApiProcessId, config.companyId, 'removemanagers');\r\n    let result = await axios.post(uri, {\r\n      id: data._id,\r\n      username: data.nickname\r\n    }, {\r\n        headers: getHeadera(),\r\n      });\r\n    return result;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const fetchDialogs = async () => {\r\n  try {\r\n\r\n    let result = await axios.get('https://chat.mixapp.io/api/v1/groups.list', {\r\n      headers: getRocketChatHeaders()\r\n    });\r\n    return getDialogsNmsgs(result.data.groups);\r\n\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\n/*   */\r\nexport const fetchDialog = async (data) => {\r\n  try {\r\n\r\n    let result = await axios.get('https://chat.mixapp.io/api/v1/groups.history', {\r\n      params: data,\r\n      headers: getRocketChatHeaders()\r\n    });\r\n    return result.data.messages;\r\n\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const fetchGroupList = async () => {\r\n  try {\r\n    return await axios.get('https://chat.mixapp.io/api/v1/groups.list', {\r\n      headers: getRocketChatHeaders()\r\n    });\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const fetchGroupInfo = async (data) => {\r\n  try {\r\n    return await axios.get('https://chat.mixapp.io/api/v1/groups.info', {\r\n      params: data,\r\n      headers: getRocketChatHeaders()\r\n    });\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const deleteRequest = async (data) => {\r\n  try {\r\n    const uri = getUrl(config.backApiProcessId, config.companyId, 'request-close');\r\n    let result = await axios.post(uri, data, {\r\n      headers: getHeadera(),\r\n    });\r\n    return result;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const fetchRole = async () => {\r\n  try {\r\n\r\n    const uri = getUrl(config.backApiProcessId, config.companyId, 'fetch-role');\r\n    let result = await axios.get(uri, {\r\n      headers: getHeadera()\r\n    });\r\n    return result.data;\r\n\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const sendMessageSaga = async (room, text) => {\r\n  try {\r\n    let result = await axios({\r\n      method: 'POST',\r\n      url: 'https://chat.mixapp.io/api/v1/chat.postMessage',\r\n      data: {\r\n        roomId: room._id,\r\n        text: text\r\n      },\r\n      headers: getRocketChatHeaders(true)\r\n    });\r\n    return result;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport const formatDate = (date, lang) => {\r\n  const monthNames = {\r\n    en: [\r\n      \"January\", \"February\", \"March\",\r\n      \"April\", \"May\", \"June\", \"July\",\r\n      \"August\", \"September\", \"October\",\r\n      \"November\", \"December\"\r\n    ],\r\n    ru: [\r\n      \"\", \"\", \"\",\r\n      \"\", \"\", \"\", \"\",\r\n      \"\", \"\", \"\",\r\n      \"\", \"\"\r\n    ]\r\n  }\r\n\r\n  let day = date.getDate();\r\n  let month = lang ? monthNames[lang][date.getMonth()] : date.getMonth();\r\n  let year = date.getFullYear();\r\n  let hours = date.getHours();\r\n  let minutes = date.getMinutes();\r\n\r\n  return ('0' + (day + 1)).slice(-2) + '.' + ('0' + (month + 1)).slice(-2) + '.' + year + ', ' + (\"0\" + hours).slice(-2) + ':' + minutes;\r\n}\r\n\r\nexport const websocketInitRoomsChanged = () => {\r\n  var Xuser = getRocketChatHeaders();\r\n  return eventChannel(emitter => {\r\n    // init the connection here\r\n    const options = {\r\n      endpoint: 'wss://chat.mixapp.io/websocket',\r\n      SocketConstructor: WebSocket\r\n    };\r\n    var ddp = new DDP(options);\r\n    ddp.on('connected', () => {\r\n      ddp.method('login', [{ resume: Xuser['X-Auth-Token'] }]);\r\n      ddp.sub('stream-notify-user', [Xuser['X-User-Id'] + '/rooms-changed', false]);\r\n    });\r\n\r\n    ddp.on('changed', (data) => {\r\n      return emitter({ type: 'SOCKET_ROOMS_CHANGED_EVENT', data });\r\n    });\r\n\r\n    // unsubscribe function\r\n    return () => {\r\n      // do whatever to interrupt the socket communication here\r\n    }\r\n  })\r\n}\r\n\r\nvar cache = {};\r\nexport const memo = (func) => {\r\n  return function () {\r\n    var key = JSON.stringify(arguments);\r\n    if (cache[key]) {\r\n      return cache[key];\r\n    }\r\n    else {\r\n      let val = func.apply(null, arguments);\r\n      cache[key] = val;\r\n      return val;\r\n    }\r\n  }\r\n}","import { put, fork, takeLatest, call, take } from 'redux-saga/effects';\r\nimport { push } from 'react-router-redux';\r\nimport {\r\n  SET_AUTHORIZE,\r\n  FETCH_SETTINGS_REQUEST, FETCH_SETTINGS_SUCCESS, //FETCH_SETTINGS_ERROR,\r\n  SAVE_SETTINGS_REQUEST, SAVE_SETTINGS_SUCCESS, //SAVE_SETTINGS_ERROR,\r\n  FETCH_MANAGERS_REQUEST, FETCH_MANAGERS_SUCCESS, //FETCH_MANAGERS_ERROR,\r\n  ADD_MANAGER_REQUEST, ADD_MANAGER_SUCCESS, ADD_MANAGER_ERROR,\r\n  REMOVE_MANAGER_REQUEST, REMOVE_MANAGER_SUCCESS,  //REMOVE_MANAGER_ERROR,\r\n  FETCH_DIALOGS_REQUEST, FETCH_DIALOGS_SUCCESS, //FETCH_DIALOGS_ERROR\r\n  LOADER_ON, LOADER_OFF,\r\n  FETCH_DIALOG_REQUEST, FETCH_DIALOG_SUCCESS, //FETCH_DIALOG_ERROR\r\n  SEND_MESSAGE_REQUEST, SEND_MESSAGE_SUCCESS, //SEND_MESSAGE_ERROR\r\n  LOADER_TURN_OFF,\r\n  FETCH_ROLE_REQUEST, FETCH_ROLE_SUCCESS, //FETCH_ROLE_ERROR\r\n  FETCH_REQUESTS_REQUEST, FETCH_REQUESTS_SUCCESS, //FETCH_REQUESTS_ERROR\r\n  DELETE_REQUESTS_REQUEST, //DELETE_REQUESTS_SUCCESS, //DELETE_REQUESTS_ERROR\r\n  FETCH_CONFIG_SUCCESS\r\n} from '../constants';\r\nimport * as Api from '../api';\r\nimport * as lsApi from '../lsApi';\r\nimport * as _ from 'underscore';\r\n\r\nfunction* sendMessageSaga() {\r\n  yield takeLatest(SEND_MESSAGE_REQUEST, function* (action) {\r\n    try {\r\n      let { room, text } = action.data;\r\n      let result = yield Api.sendMessageSaga(room, text);\r\n\r\n      let lsDialogs = lsApi.getDialogs();\r\n      let lsDialog = _.findIndex(lsDialogs, { _id: action.data.roomId });\r\n      lsDialogs[lsDialog].nmsgs = 0;\r\n      lsDialogs[lsDialog].msgs = lsDialogs[lsDialog].msgs + 1;\r\n      lsApi.updateDialogs(lsDialogs);\r\n\r\n      if (result.status === 200) {\r\n        yield put({ type: SEND_MESSAGE_SUCCESS });\r\n      }\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  })\r\n}\r\n\r\nfunction* fetchDialogSaga() {\r\n  yield takeLatest(FETCH_DIALOG_REQUEST, function* (action) {\r\n    try {\r\n      \r\n      yield put({ type: LOADER_ON });\r\n      let { room } = action.data;\r\n\r\n      lsApi.updateDialogs(lsApi.readDialog(room));\r\n      let dialogs = yield Api.fetchDialogs();\r\n      lsApi.setDialogs(dialogs);\r\n      yield put({ type: FETCH_DIALOGS_SUCCESS, dialogs });\r\n\r\n      let groupInfo = yield Api.fetchGroupInfo({ roomId: room._id });\r\n      let messages = yield Api.fetchDialog({ roomId: room._id, unreads: true, count: action.data.count });\r\n      yield put({\r\n        type: FETCH_DIALOG_SUCCESS, data: {\r\n          messages: messages,\r\n          room: room,\r\n          messagesCount: groupInfo.data.group.msgs\r\n        }\r\n      });\r\n      yield put({ type: LOADER_OFF });\r\n\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  })\r\n}\r\n\r\nfunction* fetchDialogsSaga() {\r\n  yield takeLatest(FETCH_DIALOGS_REQUEST, function* (action) {\r\n    try {\r\n\r\n      yield put({ type: LOADER_ON });\r\n      let dialogs = yield Api.fetchDialogs();\r\n\r\n      lsApi.setDialogs(dialogs);\r\n\r\n      yield put({ type: FETCH_DIALOGS_SUCCESS, dialogs });\r\n      yield put({ type: LOADER_OFF });\r\n\r\n      /* NEW */\r\n      let socket = yield call(Api.websocketInitRoomsChanged);\r\n      while (true) {\r\n        const action = yield take(socket);\r\n        yield put(action);\r\n        //TODO\r\n        let dialogs = yield Api.fetchDialogs();\r\n        yield put({ type: FETCH_DIALOGS_SUCCESS, dialogs });\r\n      }\r\n    } catch (err) {\r\n      throw (err);\r\n    }\r\n  })\r\n}\r\n\r\nfunction* removeManagerSaga() {\r\n  yield takeLatest(REMOVE_MANAGER_REQUEST, function* (action) {\r\n    try {\r\n\r\n      yield put({ type: LOADER_ON });\r\n      let result = yield Api.removeManager(action.data);\r\n      if (!result.data.error) {\r\n        yield put({ type: REMOVE_MANAGER_SUCCESS, result });\r\n        yield put({ type: FETCH_MANAGERS_REQUEST });\r\n      }\r\n      yield put({ type: LOADER_OFF });\r\n\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  })\r\n}\r\n\r\nfunction* addManagerSaga() {\r\n  yield takeLatest(ADD_MANAGER_REQUEST, function* (action) {\r\n    try {\r\n\r\n      yield put({ type: LOADER_ON });\r\n      let result = yield Api.addManager(action.data);\r\n      if (!result.data.error) {\r\n        yield put({ type: ADD_MANAGER_SUCCESS, result });\r\n        yield put({ type: FETCH_MANAGERS_REQUEST });\r\n      } else {\r\n        yield put({ type: ADD_MANAGER_ERROR, result });\r\n      }\r\n      yield put({ type: LOADER_OFF });\r\n\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  })\r\n}\r\n\r\nfunction* fetchManagersSaga() {\r\n  yield takeLatest(FETCH_MANAGERS_REQUEST, function* (action) {\r\n    try {\r\n\r\n      yield put({ type: LOADER_ON });\r\n      let managers = yield Api.fetchManagers();\r\n      if (!managers.error) {\r\n        managers.managers.forEach((value, key) => {\r\n          value.key = String(key + 1);\r\n          value.number = key + 1;\r\n        });\r\n      }\r\n      yield put({ type: FETCH_MANAGERS_SUCCESS, managers });\r\n      yield put({ type: LOADER_OFF });\r\n\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  })\r\n}\r\n\r\nfunction* saveSettingsSaga() {\r\n  yield takeLatest(SAVE_SETTINGS_REQUEST, function* (action) {\r\n    try {\r\n\r\n      yield put({ type: LOADER_ON });\r\n      yield Api.saveSettings(action.data);\r\n      yield put({ type: SAVE_SETTINGS_SUCCESS });\r\n      yield put({ type: LOADER_OFF });\r\n\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  })\r\n}\r\n\r\nfunction* fetchSettingsSaga() {\r\n  yield takeLatest(FETCH_SETTINGS_REQUEST, function* (action) {\r\n    try {\r\n\r\n      yield put({ type: LOADER_ON });\r\n      yield put({ type: FETCH_SETTINGS_SUCCESS, widgetSettings: yield Api.fetchSettings() });\r\n      yield put({ type: FETCH_CONFIG_SUCCESS, config: yield Api.fetchConfig() });\r\n      yield put({ type: LOADER_OFF });\r\n\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  });\r\n}\r\n\r\nfunction* loginSaga() {\r\n  yield takeLatest(SET_AUTHORIZE, function* (action) {\r\n    try {\r\n      localStorage.setItem('user', JSON.stringify(action.data))\r\n      //Get RocketChat Token\r\n      let result = yield Api.getXauthToken();\r\n      localStorage.setItem('XUSER', JSON.stringify(result));\r\n\r\n      const uri = localStorage.getItem('redirect');\r\n      localStorage.removeItem('redirect');\r\n      yield put(push(uri || '/'));\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  });\r\n}\r\n\r\nfunction* loaderOff() {\r\n  yield takeLatest(LOADER_TURN_OFF, function* (action) {\r\n    try {\r\n      yield put({ type: LOADER_OFF });\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  });\r\n}\r\n\r\nfunction* fetchRoleSaga() {\r\n  yield takeLatest(FETCH_ROLE_REQUEST, function* (action) {\r\n    try {\r\n\r\n      yield put({ type: LOADER_ON });\r\n      let role = yield Api.fetchRole();\r\n      if (!role.error) {\r\n        yield put({ type: FETCH_ROLE_SUCCESS, role: role.role });\r\n      }\r\n      yield put({ type: LOADER_OFF });\r\n\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  });\r\n}\r\n\r\nfunction* fetchRequestsSaga() {\r\n  yield takeLatest(FETCH_REQUESTS_REQUEST, function* () {\r\n    try {\r\n\r\n      yield put({ type: LOADER_ON });\r\n      let config = Api.fetchConfig();\r\n      let groupInfo = yield Api.fetchGroupInfo({ roomName: 'Requests_' + config.companyId });\r\n      let messages = yield Api.fetchDialog({ roomId: groupInfo.data.group._id, count: 9999 });\r\n      _.each(messages, (value, key) => {\r\n        let time = typeof value.ts === 'string' ? new Date(value.ts) : new Date(value.ts.$date);\r\n        value.key = value._id;\r\n        value.ts = time.toLocaleDateString() + ', ' + time.toLocaleTimeString();\r\n      });\r\n      yield put({ type: FETCH_REQUESTS_SUCCESS, messages: messages.reverse() });\r\n      yield put({ type: LOADER_OFF });\r\n\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  })\r\n}\r\n\r\nfunction* deleteRequestSaga() {\r\n  yield takeLatest(DELETE_REQUESTS_REQUEST, function* (data) {\r\n    try {\r\n\r\n      yield put({ type: LOADER_ON });\r\n      let config = Api.fetchConfig();\r\n      let groupInfo = yield Api.fetchGroupInfo({ roomName: 'Requests_' + config.companyId });\r\n      if (data.data.length > 0) {\r\n        for (let i = 0; i < data.data.length; i++) {\r\n          yield Api.deleteRequest({ roomId: groupInfo.data.group._id, msgId: data.data[i]._id });\r\n        }\r\n      } else {\r\n        yield Api.deleteRequest({ roomId: groupInfo.data.group._id, msgId: data.data._id });\r\n      }\r\n      yield put({ type: FETCH_REQUESTS_REQUEST });\r\n      yield put({ type: LOADER_OFF });\r\n\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  });\r\n}\r\n\r\nexport default function* ordersSaga() {\r\n  yield [\r\n    fork(loginSaga),\r\n    fork(fetchSettingsSaga),\r\n    fork(saveSettingsSaga),\r\n    fork(fetchManagersSaga),\r\n    fork(addManagerSaga),\r\n    fork(removeManagerSaga),\r\n    fork(fetchDialogsSaga),\r\n    fork(fetchDialogSaga),\r\n    fork(sendMessageSaga),\r\n    fork(loaderOff),\r\n    fork(fetchRoleSaga),\r\n    fork(fetchRequestsSaga),\r\n    fork(deleteRequestSaga)\r\n  ];\r\n}","import appSagas from './appSagas';\r\nexport default function* rootSaga() {\r\n    yield [\r\n        appSagas()\r\n    ];\r\n  }","import { createStore, applyMiddleware, combineReducers } from 'redux';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport createHistory from \"history/createBrowserHistory\";\r\nimport { routerMiddleware } from \"react-router-redux\";\r\nimport thunk from 'redux-thunk'\r\n\r\nimport reducers from './reducers';\r\nimport rootSaga from './sagas';\r\n\r\nconst history = createHistory();\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst user = localStorage.getItem('user');\r\nconst initialState = {\r\n    app: {\r\n        user: user ? JSON.parse(user) : null\r\n    }\r\n  };\r\n\r\nconst store = createStore(\r\n    combineReducers({\r\n      ...reducers\r\n    }),\r\n    initialState,\r\n    applyMiddleware(thunk, sagaMiddleware, routerMiddleware(history))\r\n  );\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport { store, history };","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route } from \"react-router\";\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nconst url = 'https://api.mixapp.io/oidc/mixapp/authorize?response_type=id_token+token&client_id=5a82de9435b3820437d23cfd&redirect_uri=http://localhost:3000/authorize&scope=openid+email+profile&state=uUpgnZBBCBMnI_GLGIzCP3AZXzavFzEVC5hM6UKB_ew&nonce=UXwkyVyGj-Lw_-zEUMbySDW2A4C5G1tYA1_HKrH0-r4&display=popup'\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n    <Route {...rest} render={(props) => {\r\n        if (!rest.app.user) {\r\n            localStorage.setItem('redirect', rest.path);\r\n            window.location.href = url;\r\n            return null;\r\n        }\r\n        return rest.app.user ? <Component {...props} /> : null;\r\n    }} />\r\n)\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        app: state.app\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, null)(PrivateRoute));","import React from 'react';\r\n\r\nexport default class MainPageView extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Home</h2>\r\n        <div>Login</div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport MainPageView from '../../components/MainPage'\r\n\r\nconst MainPage = (props) => {\r\n  return <MainPageView {...props} />;\r\n};\r\n\r\nexport default MainPage;","import React from 'react';\r\nimport { Menu, Icon } from 'antd';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { withNamespaces } from 'react-i18next';\r\n\r\nclass MenuPanel extends React.Component {\r\n\r\n  state = {\r\n    currentMenuKey: 2\r\n  }\r\n\r\n  componentWillMount() {\r\n    let key;\r\n    let path = this.props.location.pathname;\r\n    switch (path) {\r\n      case '/dialogs':\r\n        key = 2;\r\n        break\r\n      case '/managers':\r\n        key = 3;\r\n        break;\r\n      case '/requests':\r\n        key = 5;\r\n        break;\r\n      case '/settings':\r\n        key = 1;\r\n        break;\r\n      default:\r\n        key = 2;\r\n    }\r\n    this.setState({\r\n      currentMenuKey: key\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const t = this.props.t;\r\n\r\n    return <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={[this.state.currentMenuKey.toString()]}>\r\n\r\n      <Menu.Item key=\"2\">\r\n        <Link to='/dialogs'>\r\n          <Icon type=\"database\" />\r\n          <span>{t('mainMenu.dialogs')}</span>\r\n        </Link>\r\n      </Menu.Item>\r\n\r\n      <Menu.Item key=\"5\">\r\n        <Link to='/requests'>\r\n          <Icon type=\"inbox\" />\r\n          <span>{t('mainMenu.requests')}</span>\r\n        </Link>\r\n      </Menu.Item>\r\n\r\n      {this.props.role === 'admin' ?\r\n        <Menu.Item key=\"3\">\r\n          <Link to='/managers'>\r\n            <Icon type=\"team\" />\r\n            <span>{t('mainMenu.managers')}</span>\r\n          </Link>\r\n        </Menu.Item> : null}\r\n\r\n      {this.props.role === 'admin' ?\r\n        <Menu.Item key=\"1\">\r\n          <Link to='/settings'>\r\n            <Icon type=\"setting\" />\r\n            <span>{t('mainMenu.settings')}</span>\r\n          </Link>\r\n        </Menu.Item> : null}\r\n\r\n      <Menu.Item key=\"4\">\r\n        <Link to='/logout'>\r\n          <Icon type=\"upload\" />\r\n          <span>{t('mainMenu.logout')}</span>\r\n        </Link>\r\n      </Menu.Item>\r\n    </Menu>\r\n  }\r\n}\r\n\r\nexport default withNamespaces()(withRouter(props => <MenuPanel {...props} />));","import {\r\n  FETCH_SETTINGS_REQUEST,\r\n  SAVE_SETTINGS_REQUEST,\r\n  FETCH_MANAGERS_REQUEST,\r\n  ADD_MANAGER_REQUEST,\r\n  REMOVE_MANAGER_REQUEST,\r\n  FETCH_DIALOGS_REQUEST,\r\n  FETCH_DIALOG_REQUEST,\r\n  SEND_MESSAGE_REQUEST,\r\n  LOADER_OFF,\r\n  LOADER_ON,\r\n  FETCH_ROLE_REQUEST,\r\n  FETCH_REQUESTS_REQUEST,\r\n  DELETE_REQUESTS_REQUEST,\r\n} from '../constants'\r\n\r\nexport const sendMessage = (data) => {\r\n  return {\r\n    type: SEND_MESSAGE_REQUEST,\r\n    data\r\n  }\r\n}\r\n\r\nexport const fetchSettings = () => {\r\n  return {\r\n    type: FETCH_SETTINGS_REQUEST\r\n  };\r\n};\r\n\r\nexport const saveSettings = (data) => {\r\n  return {\r\n    type: SAVE_SETTINGS_REQUEST,\r\n    data\r\n  };\r\n};\r\n\r\nexport const fetchManagers = () => {\r\n  return {\r\n    type: FETCH_MANAGERS_REQUEST\r\n  }\r\n}\r\n\r\nexport const addManager = (data) => {\r\n  return {\r\n    type: ADD_MANAGER_REQUEST,\r\n    data\r\n  }\r\n}\r\n\r\nexport const removeManager = (data) => {\r\n  return {\r\n    type: REMOVE_MANAGER_REQUEST,\r\n    data\r\n  }\r\n}\r\n\r\nexport const fetchDialogs = () => {\r\n  return {\r\n    type: FETCH_DIALOGS_REQUEST\r\n  }\r\n}\r\n\r\nexport const fetchDialog = (data) => {\r\n  return {\r\n    type: FETCH_DIALOG_REQUEST,\r\n    data\r\n  }\r\n}\r\n\r\nexport const loaderOff = () => {\r\n  return {\r\n    type: LOADER_OFF\r\n  }\r\n}\r\n\r\nexport const loaderOn = () => {\r\n  return {\r\n    type: LOADER_ON\r\n  }\r\n}\r\n\r\nexport const fetchRole = () => {\r\n  return {\r\n    type: FETCH_ROLE_REQUEST\r\n  }\r\n}\r\n\r\nexport const fetchRequests = (data) => {\r\n  return {\r\n    type: FETCH_REQUESTS_REQUEST,\r\n    data\r\n  }\r\n}\r\n\r\nexport const deleteRequest = (data) => {\r\n  return {\r\n    type: DELETE_REQUESTS_REQUEST,\r\n    data\r\n  }\r\n}","import React from 'react';\r\nimport { Layout, Menu, Input, Tag, Avatar } from 'antd';\r\nimport * as _ from 'underscore';\r\n\r\nconst { Sider } = Layout;\r\nconst Search = Input.Search;\r\n\r\nclass DialogsListMenu extends React.Component {\r\n\r\n  state = {\r\n    searchDialogText: ''\r\n  }\r\n\r\n  async searchDialog(value) {\r\n    await this.setState({\r\n      searchDialogText: value\r\n    });\r\n  }\r\n\r\n  fetchDialog = async (currentRoom) => {\r\n    await this.props.fetchDialog({\r\n      count: 15,\r\n      room: currentRoom\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let { t } = this.props;\r\n    let dialogs = _.sortBy(this.props.app.dialogs, 'nmsgs').reverse();\r\n    let menuItems = [];\r\n    if (!dialogs) dialogs = [];\r\n    dialogs.forEach(item => {\r\n      let result = item.name.split('_');\r\n      let companyid = result[result.length - 1];\r\n      item.name = item.name.replace(companyid, '');\r\n      async function fetchDialog() {\r\n        try {\r\n          await this.fetchDialog(item);\r\n        } catch (err) {\r\n          throw err;\r\n        }\r\n      }\r\n\r\n      if (item.name.search(this.state.searchDialogText) !== -1)\r\n        menuItems.push(\r\n          <Menu.Item key={item._id} onClick={fetchDialog.bind(this)}>\r\n            <div className='dialogs-item-container'>\r\n              <Avatar size='small'>U</Avatar>\r\n              <span>{item.name.substring(0, item.name.length - 1)}</span>\r\n              {item.nmsgs > 0 && <Tag color=\"#f50\">{item.nmsgs}</Tag>}\r\n            </div>\r\n          </Menu.Item>\r\n        );\r\n    })\r\n    return (\r\n      <Sider style={{ display: this.props.dialogsListShow }} className='dialogs-item-sider' >\r\n        <div className=\"logo_container\">\r\n          <div className=\"logo\">\r\n            <Search\r\n              placeholder={t(\"dialogsList.dialogName\")}\r\n              onSearch={value => this.searchDialog(value)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <Menu theme=\"dark\" mode=\"inline\" className='dialogs-item-sider'>\r\n          {menuItems}\r\n        </Menu>\r\n      </Sider>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DialogsListMenu;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { fetchDialog } from '../../actions/settings';\r\nimport DialogsListMenu from '../../components/DialogsList';\r\nimport { withNamespaces } from 'react-i18next';\r\n\r\nconst DialogsList = (props) => {\r\n    return <DialogsListMenu {...props} />\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        app: state.app\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    return {\r\n        fetchDialog: (data) => { dispatch(fetchDialog(data)) }\r\n    }\r\n}\r\n\r\nexport default withNamespaces()(connect(mapStateToProps, mapDispatchToProps)(DialogsList));","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Layout, Icon, Dropdown, Menu } from 'antd';\r\nimport MenuPanel from '../Menu';\r\nimport './styles.css';\r\nimport DialogsList from '../../containers/DialogsList';\r\nimport { Spin } from 'antd';\r\nimport { withNamespaces } from 'react-i18next';\r\n\r\n\r\nconst { Header, Sider, Content } = Layout;\r\n\r\nclass Wrapper extends React.Component {\r\n  state = {\r\n    collapsed: false\r\n  };\r\n\r\n  changeLanguage = async (lng) => {\r\n    this.props.i18n.changeLanguage(lng);\r\n  }\r\n\r\n  toggle = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let { location, lng } = this.props;\r\n    let dialogsListShow = location.pathname === '/dialogs' ? '' : 'none';\r\n    let contentClass = 'content ' + location.pathname.replace('/', '');\r\n\r\n    /* Lng menu */\r\n\r\n    let lngMenu = (\r\n      <Menu>\r\n        <Menu.Item key=\"0\" onClick={this.changeLanguage.bind(this, 'ru')}>\r\n          <span>Russian</span>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"1\" onClick={this.changeLanguage.bind(this, 'en')}>\r\n          <div>English</div>\r\n        </Menu.Item>\r\n      </Menu>\r\n    );\r\n\r\n    return (\r\n      <Layout className=\"main_layout\">\r\n        <Sider trigger={null} collapsible collapsed={this.state.collapsed}>\r\n          <div className=\"logo_container\">\r\n            <div className=\"logo\">LOGO</div>\r\n          </div>\r\n          <MenuPanel role={this.props.role} />\r\n        </Sider>\r\n        <DialogsList dialogsListShow={dialogsListShow} />\r\n\r\n        <Layout>\r\n          <Header className=\"header\">\r\n            <Icon\r\n              className=\"trigger\"\r\n              type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'}\r\n              onClick={this.toggle}\r\n            />\r\n            <div>\r\n              <Dropdown overlay={lngMenu} trigger={['click']}>\r\n                <span className=\"ant-dropdown-link\" href=\"\">\r\n                  {lng} <Icon type=\"down\" />\r\n                </span>\r\n              </Dropdown>\r\n            </div>\r\n          </Header>\r\n          {location.pathname === '/dialogs'\r\n            ? <Content className={contentClass}>{this.props.children}</Content>\r\n            : <Spin spinning={this.props.loader} delay={0}>\r\n              <Content className={contentClass}>{this.props.children}</Content>\r\n            </Spin>\r\n          }\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withNamespaces()(withRouter(props => <Wrapper {...props} />));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setAuthorize } from '../../actions/app';\r\n\r\nconst transform = (data) => {\r\n    const result = {};\r\n    if (data[0] === '#') {\r\n        data = data.substr(1);\r\n    }\r\n    const params = data.split('&');\r\n    for (let i = 0; i < params.length; i++) {\r\n        let param = params[i].split('=');\r\n        result[param[0]] = param[1];\r\n    }\r\n    return result;\r\n};\r\n\r\nclass Authorize extends React.Component {\r\n    componentDidMount() {\r\n\r\n        let result = transform(this.props.location.hash);\r\n        //console.log('TOKEN', result.token);\r\n\r\n        if (result.token) {\r\n            this.props.setAuthorize(result);\r\n        } else {\r\n            //alert();\r\n        }\r\n\r\n    }\r\n    render() {\r\n        return <div></div>;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        app: state.app\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    return {\r\n        setAuthorize: (result) => { dispatch(setAuthorize(result)) }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Authorize);","import {\r\n  SET_AUTHORIZE\r\n} from '../constants';\r\n\r\nexport const setAuthorize = (data) => {\r\n  return {\r\n    type: SET_AUTHORIZE,\r\n    data\r\n  }\r\n};","import React from 'react';\r\nimport { Form, Input, Button, Radio, Collapse, Alert, message } from 'antd';\r\nimport { CirclePicker } from 'react-color';\r\n\r\nconst FormItem = Form.Item;\r\nconst RadioGroup = Radio.Group;\r\nconst Panel = Collapse.Panel;\r\n\r\nclass RegistrationForm extends React.Component {\r\n\r\n  state = {\r\n    widgetCode: true\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFieldsAndScroll((err, values) => {\r\n      if (!err) {\r\n        this.props.saveSettings(values);\r\n      }\r\n    });\r\n  }\r\n\r\n  handleChange(color, event) {\r\n    this.props.form.setFieldsValue({\r\n      color: color.hex\r\n    });\r\n  }\r\n\r\n  fallbackCopyTextToClipboard(text) {\r\n    let { t } = this.props;\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = this.widgetCode;\r\n    document.body.appendChild(textArea);\r\n    textArea.focus();\r\n    textArea.select();\r\n\r\n    try {\r\n      var successful = document.execCommand('copy');\r\n      if (successful)\r\n        message.success(t('Code copied'));\r\n      else\r\n        message.error(t('Copy failed'));\r\n    } catch (err) {\r\n      message.error('Fallback: Oops, unable to copy', err);\r\n    }\r\n    document.body.removeChild(textArea);\r\n  }\r\n\r\n  render() {\r\n    let { t } = this.props;\r\n    const { getFieldDecorator } = this.props.form;\r\n    const companyId = this.props.app.config ? this.props.app.config.companyId : ' pending... ';\r\n    this.widgetCode = \"<script> window.onload = () => { Omni.Widget({ companyId: '\" + companyId + \"' }); } </script>\";\r\n\r\n    return (\r\n      <div>\r\n        <label><b>{t('Copy this code into body of your HTML')}</b></label>\r\n        <div style={{ display: 'flex' }}>\r\n          <Alert message={this.widgetCode} type=\"info\" style={{ borderRadius: 0 }} />\r\n          <Button type=\"primary\" icon=\"copy\" size=\"large\" style={{ borderRadius: 0 }} onClick={this.fallbackCopyTextToClipboard.bind(this)} />\r\n        </div>\r\n        <br />\r\n        <Form onSubmit={this.handleSubmit} layout='vertical'>\r\n          <FormItem label={t('Company name')}>\r\n            {getFieldDecorator('companyName', {\r\n              initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.companyName : '',\r\n              rules: [\r\n                { required: true }\r\n              ],\r\n            })(<Input placeholder={t('Company name')} />)}\r\n          </FormItem>\r\n\r\n          <FormItem label={t('Widget is active')}>\r\n            {getFieldDecorator('isActive', {\r\n              initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.isActive : '',\r\n              rules: []\r\n            })(<RadioGroup>\r\n              <Radio value={true}>{t('Yes')}</Radio>\r\n              <Radio value={false}>{t('No')}</Radio>\r\n            </RadioGroup>)}\r\n          </FormItem>\r\n\r\n          <FormItem label={t('Chat should be open?')}>\r\n            {getFieldDecorator('openChat', {\r\n              initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.openChat : '',\r\n              rules: []\r\n            })(<RadioGroup>\r\n              <Radio value={true}>{t('Yes')}</Radio>\r\n              <Radio value={false}>{t('No')}</Radio>\r\n            </RadioGroup>)}\r\n          </FormItem>\r\n\r\n          <FormItem label={t('Widget color')}>\r\n            {getFieldDecorator('colorR', {\r\n              initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.colorR : '',\r\n              rules: [],\r\n            })(<CirclePicker onChangeComplete={this.handleChange.bind(this)} />)}\r\n          </FormItem>\r\n\r\n\r\n          <FormItem>\r\n            {getFieldDecorator('color', {\r\n              initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.color : '',\r\n              rules: [],\r\n            })(<Input placeholder='Color picker soon ...' />)}\r\n          </FormItem>\r\n\r\n          <Collapse bordered={false} accordion defaultActiveKey={['1']} onChange={this.callback}>\r\n            <Panel header=\"Telegram\" key=\"1\">\r\n              <FormItem label={t('Bot name')}>\r\n                {getFieldDecorator('telegram_bot_name', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.telegram_bot_name : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n\r\n              <FormItem label={t('Bot token')}>\r\n                {getFieldDecorator('telegram_token', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.telegram_token : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n            </Panel>\r\n\r\n            <Panel header=\"Viber\" key=\"2\">\r\n              <FormItem label={t('Bot name')}>\r\n                {getFieldDecorator('viber_bot_name', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.viber_bot_name : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n\r\n              <FormItem label={t('Bot token')}>\r\n                {getFieldDecorator('viber_token', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.viber_token : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n            </Panel>\r\n\r\n            <Panel header=\"Plusofon\" key=\"3\">\r\n              <FormItem label={t('Phone')}>\r\n                {getFieldDecorator('sms_phone', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.sms_phone : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n\r\n              <FormItem label={t('API token')}>\r\n                {getFieldDecorator('sms_token', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.sms_token : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n            </Panel>\r\n\r\n            <Panel header=\"VK\" key=\"4\">\r\n              <FormItem label={t('Group name')}>\r\n                {getFieldDecorator('vk_group_name', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.vk_group_name : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n\r\n              <FormItem label={t('Group token')}>\r\n                {getFieldDecorator('vk_token', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.vk_token : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n\r\n              <FormItem label={t('Confirmation code')}>\r\n                {getFieldDecorator('vk_confirmation_code', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.vk_confirmation_code : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)\r\n                }\r\n              </FormItem>\r\n            </Panel>\r\n\r\n            <Panel header=\"FB Messenger\" key=\"5\">\r\n              <FormItem label={t('API key')}>\r\n                {getFieldDecorator('fbm_api_key', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.fbm_api_key : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n\r\n              <FormItem label={t('Secret')}>\r\n                {getFieldDecorator('fbm_secret', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.fbm_secret : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n\r\n              <FormItem label={t('Page URL')}>\r\n                {getFieldDecorator('fbm_page', {\r\n                  initialValue: this.props.app.widgetSettings ? this.props.app.widgetSettings.fbm_page : '',\r\n                  rules: [],\r\n                })(<Input placeholder='' />)}\r\n              </FormItem>\r\n            </Panel>\r\n\r\n          </Collapse>\r\n          <FormItem>\r\n            <br />\r\n          </FormItem>\r\n          <FormItem>\r\n            <Button type='primary' htmlType='submit'>{t('Save')}</Button>\r\n          </FormItem>\r\n        </Form >\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form.create()(RegistrationForm);","import React from 'react';\r\nimport Settings from './Settings';\r\n\r\nexport default class SettinggsView extends React.Component {\r\n  componentDidMount() {\r\n    this.props.fetchSettings();\r\n  }\r\n  render() {\r\n    return <Settings\r\n      {... this.props}\r\n    />\r\n  }\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport SettingsView from '../../components/SettingsView';\r\nimport { fetchSettings, saveSettings } from '../../actions/settings';\r\nimport { withNamespaces } from 'react-i18next';\r\n\r\nconst Settings = (props) => {\r\n  return <SettingsView {...props} />;\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return {\r\n    app: state.app\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    fetchSettings: () => { dispatch(fetchSettings()) },\r\n    saveSettings: (data) => { dispatch(saveSettings(data)) }\r\n  }\r\n}\r\n\r\nexport default withNamespaces()(connect(mapStateToProps, mapDispatchToProps)(Settings));","import React from 'react';\r\nimport Parser from 'html-react-parser';\r\nimport { List, Avatar, Comment, Tooltip } from 'antd';\r\nimport * as Api from '../../api';\r\n\r\nexport default class CommentItem extends React.Component {\r\n\r\n  componentDidMount() {\r\n    this.client = JSON.parse(localStorage.getItem('XUSER')).data.userId;\r\n  }\r\n\r\n  render() {\r\n    return <List\r\n      size=\"small\"\r\n      dataSource={this.props.messages}\r\n      renderItem={item => {\r\n        let time = typeof item.ts === 'string' ? new Date(item.ts) : new Date(item.ts.$date);\r\n        if (item.u.name)\r\n          item.u.name.length > 15 ? item.u.shortName = item.u.name.substring(0, 15) + '...' : item.u.shortName = item.u.name;\r\n        if (item.file) {\r\n          switch (item.file.type) {\r\n            case 'image/png':\r\n              item.fileLink = <img height='150px' src={'https://chat.mixapp.io/file-upload/' + item.file._id + '/' + item.file.name} alt={item.file.name} />;\r\n              break;\r\n            case 'text/plain':\r\n              item.fileLink = <a href={'https://chat.mixapp.io/file-upload/' + item.file._id + '/' + item.file.name}>{item.file.name}</a>;\r\n              break;\r\n            default:\r\n              item.fileLink = null;\r\n              break;\r\n          }\r\n        }\r\n        return (\r\n          <Comment\r\n            key={item._id}\r\n            author={<b>{item.u.shortName}</b>}\r\n            avatar={(\r\n              <Avatar style={{ backgroundColor: item.u._id === this.client ? '#77a2ff' : '#ff87a3' }}>U</Avatar>\r\n            )}\r\n            content={(\r\n              <div>\r\n                {Parser(item.msg.replace(/\\n/g, '<br/>'))}\r\n                <div>{item.fileLink ? item.fileLink : ''}</div>\r\n              </div>\r\n            )}\r\n            datetime={(\r\n              <Tooltip title=\"\">\r\n                <span>{Api.formatDate(time)}</span>\r\n              </Tooltip>\r\n            )}\r\n          />\r\n        );\r\n      }\r\n      }\r\n    >\r\n    </List>;\r\n  }\r\n}","import React from 'react';\r\n\r\nclass SendButton extends React.Component {\r\n    render() {\r\n        return <svg viewBox=\"0 0 20 20\" id=\"icon-send\" width=\"100%\" height=\"100%\" fill=\"#c2c2c2\">\r\n            <path d=\"M17.28 1.186L1.562 10.253a1.123 1.123 0 0 0 .134 2.01l4.919 2.035v3.58c0 1.059 1.326 1.518 1.99.711L10.734 16l4.434 1.832a1.122 1.122 0 0 0 1.537-.867L18.951 2.33c.144-.937-.863-1.61-1.67-1.144zM7.738 17.877v-3.116l1.912.79-1.912 2.326zm7.86-1.084l-7.236-2.99 7-8.273c.169-.197-.101-.463-.298-.295L6.105 12.87l-3.982-1.642 15.72-9.07-2.247 14.635z\"></path>\r\n        </svg>\r\n    }\r\n}\r\n\r\nexport default SendButton;","import React from 'react';\r\nimport * as Scroll from 'react-scroll';\r\nimport { Row, Col, Input, Form, message } from 'antd';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport CommentItem from './items/Comment';\r\nimport SendButton from '../components/svg/send_button';\r\nimport { Spin } from 'antd';\r\nconst { TextArea } = Input\r\nconst FormItem = Form.Item;\r\n\r\n/* Scroll */\r\nconst scroll = Scroll.animateScroll;\r\n\r\nclass DialogsList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.lm = null;\r\n  }\r\n\r\n  state = {\r\n    currentRoom: null,\r\n    hasMore: true,\r\n    pageItemsCount: 15,\r\n    currentPage: 0,\r\n    lm: null, //last message,\r\n    messagesCount: 0\r\n  }\r\n\r\n  scrollToBottom(options) {\r\n    scroll.scrollToBottom({\r\n      containerId: 'chat-conteiner',\r\n      ...options\r\n    });\r\n  }\r\n\r\n  scrollToTop(options) {\r\n    scroll.scrollToTop({\r\n      containerId: 'chat-conteiner',\r\n      ...options\r\n    });\r\n  }\r\n\r\n  scrollTo(to, options) {\r\n    scroll.scrollTo(to, {\r\n      containerId: 'chat-conteiner',\r\n      ...options\r\n    });\r\n  }\r\n\r\n  sendMessage(event) {\r\n    if (event.key === 'Enter' && !event.shiftKey) {\r\n      this.handleSubmit();\r\n    }\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err && this.state.currentRoom && values.userComment.replace(/\\s/g, '').length) {\r\n        this.props.sendMessage({\r\n          room: this.state.currentRoom,\r\n          roomId: this.state.currentRoom._id,\r\n          text: values.userComment\r\n        });\r\n      }\r\n      this.props.form.resetFields('userComment');\r\n    });\r\n  }\r\n\r\n  fetchData = async () => {\r\n    this.props.fetchDialog({\r\n      count: this.state.currentPage * this.state.pageItemsCount,\r\n      room: this.state.currentRoom\r\n    });\r\n  }\r\n\r\n  handleInfiniteOnLoad = async () => {\r\n    if (this.state.currentPage * this.state.pageItemsCount >= this.state.messagesCount) {\r\n      message.warning('Infinite List loaded all');\r\n      this.setState({\r\n        hasMore: false\r\n      });\r\n      return;\r\n    }\r\n    this.setState({\r\n      currentPage: ++this.state.currentPage\r\n    })\r\n    this.fetchData();\r\n    this.scrollTo(150, { duration: 0 });\r\n  }\r\n\r\n  async componentDidUpdate() {\r\n    let { messages, message } = this.props;\r\n    if (messages) {\r\n      let lm = messages[messages.length - 1];\r\n      if (this.lm) {\r\n        if (message && this.lm._id !== message._id) {\r\n          this.lm = lm;\r\n          this.scrollToBottom({ duration: 0 });\r\n        }\r\n        if (this.state.currentPage === 0) {\r\n          this.scrollToBottom({ duration: 0 });\r\n        }\r\n      } else {\r\n        this.lm = lm;\r\n        this.scrollToBottom({ duration: 0 });\r\n      }\r\n    }\r\n  }\r\n\r\n  async componentWillReceiveProps() {\r\n    let { currentRoom, messagesCount } = this.props;\r\n    if (currentRoom) {\r\n      if (this.state.currentRoom && currentRoom._id !== this.state.currentRoom._id) {\r\n        await this.setState({\r\n          hasMore: true,\r\n          currentPage: 0\r\n        });\r\n      }\r\n      await this.setState({\r\n        currentRoom: currentRoom\r\n      });\r\n    }\r\n    if (messagesCount) {\r\n      await this.setState({\r\n        messagesCount: messagesCount\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setState({\r\n      currentRoom: null,\r\n      lm: null //last message\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    let commentConteiner, chatConteiner, chatHeight;\r\n    var tx = document.getElementsByTagName('textarea');\r\n    for (var i = 0; i < tx.length; i++) {\r\n      tx[i].setAttribute('style', 'height:' + (tx[i].scrollHeight) + 'px;');\r\n      tx[i].addEventListener(\"input\", OnInput, false);\r\n    }\r\n\r\n    function OnInput() {\r\n      if (this.scrollHeight < 100) {\r\n        this.style.height = 'auto';\r\n        this.style.height = (this.scrollHeight) + 'px';\r\n        if (this.scrollHeight - 50 > -1) {\r\n          chatConteiner.style.height = chatHeight - (this.scrollHeight - 50) + 'px';\r\n        }\r\n      }\r\n    }\r\n\r\n    setTimeout(() => {\r\n      commentConteiner = document.getElementsByClassName('content dialogs')[0];\r\n      chatConteiner = document.getElementsByClassName('chat-conteiner')[0];\r\n      chatHeight = commentConteiner.clientHeight - 55;\r\n      chatConteiner.style.height = chatHeight + 'px'\r\n    }, 0);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.currentRoom) { }\r\n    const {\r\n      getFieldError, isFieldTouched, getFieldDecorator\r\n    } = this.props.form;\r\n    const userCommentError = isFieldTouched('userComment') && getFieldError('userComment');\r\n    return [\r\n      <Row key='1'>\r\n        <Col span={24} style={{ overflow: 'hidden', border: 'none' }}>\r\n          <Spin spinning={this.props.loader} delay={0}>\r\n            <div className='chat-conteiner' id='chat-conteiner'> {/* TODO width: 104% */}\r\n              <InfiniteScroll\r\n                initialLoad={false}\r\n                isReverse={true}\r\n                loadMore={this.handleInfiniteOnLoad}\r\n                hasMore={!this.state.loading && this.state.hasMore}\r\n                useWindow={false}\r\n                threshold={5}\r\n              >\r\n                <CommentItem\r\n                  messages={this.props.messages}\r\n                />\r\n              </InfiniteScroll>\r\n            </div>\r\n          </Spin>\r\n        </Col>\r\n        <Col span={0}></Col>\r\n      </Row >,\r\n      <Row key='2'>\r\n        <Col span={24}>\r\n          <Form onSubmit={this.handleSubmit}>\r\n            <FormItem\r\n              validateStatus={userCommentError ? 'error' : ''}\r\n              help={userCommentError || ''}\r\n              style={{ marginBottom: '0' }}\r\n            >\r\n              <div style={{ display: 'flex' }}>\r\n                {getFieldDecorator('userComment', {\r\n                  rules: [{ required: true, message: 'Please input your message!' }],\r\n                })(\r\n                  <TextArea placeholder=\"You commnet ...\" onKeyUp={this.sendMessage.bind(this)} />\r\n                )}\r\n                <div\r\n                  onClick={this.handleSubmit}\r\n                  className='send-button'\r\n                >\r\n                  <SendButton />\r\n                </div>\r\n              </div>\r\n            </FormItem>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    ];\r\n  }\r\n}\r\n\r\nexport default Form.create()(DialogsList);","import React from 'react';\r\nimport { Row, Col, Empty } from 'antd';\r\nimport Dialogs from './Dialogs';\r\n\r\n\r\nexport default class DialogsListView extends React.Component {\r\n\r\n  componentDidMount() {\r\n    this.props.fetchDialogs();\r\n    this.props.loaderOff();\r\n  }\r\n\r\n  render() {\r\n    const t = this.props.t;\r\n\r\n    if (!this.props.app.currentRoom) {\r\n      return <Row style={{ height: '100%' }} type=\"flex\" justify=\"space-around\" align=\"middle\">\r\n        <Col span={20}>\r\n          <Empty\r\n            image=\"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original\"\r\n            description={\r\n              <span>\r\n                {t('First of all select a dialog')}\r\n              </span>\r\n            }\r\n          >\r\n          </Empty>\r\n        </Col>\r\n      </Row>\r\n    } else {\r\n      return <Dialogs\r\n        loader={this.props.app.loader}\r\n        messagesCount={this.props.app.messagesCount}\r\n        currentRoom={this.props.app.currentRoom}\r\n        fetchDialog={this.props.fetchDialog}\r\n        messages={this.props.app.messages}\r\n        message={this.props.app.message}\r\n        dialogs={this.props.app.dialogs}\r\n        sendMessage={this.props.sendMessage}\r\n      />;\r\n    }\r\n  }\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport DialogsView from '../../components/DialogsView';\r\nimport { fetchDialogs, fetchDialog, sendMessage, loaderOff } from '../../actions/settings';\r\nimport { withNamespaces } from 'react-i18next';\r\n\r\nconst Dialogs = (props) => {\r\n    return <DialogsView {...props} />;\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        app: state.app\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    return {\r\n        fetchDialogs: () => { dispatch(fetchDialogs()) },\r\n        fetchDialog: (data) => { dispatch(fetchDialog(data)) },\r\n        sendMessage: (data) => { dispatch(sendMessage(data)) },\r\n        loaderOff: () => { dispatch(loaderOff()) }\r\n    }\r\n}\r\n\r\nexport default withNamespaces()(connect(mapStateToProps, mapDispatchToProps)(Dialogs));","import React from 'react';\r\nimport { Form, Input, Modal, message } from 'antd';\r\n\r\nconst FormItem = Form.Item;\r\n\r\nclass AddManagerForm extends React.Component {\r\n\r\n  componentDidUpdate() {\r\n    let { t } = this.props;\r\n    if (this.props.app.error_message && this.props.app.error_message.error) {\r\n      message.error(t(this.props.app.error_message.error_message));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      visible, onCancel, onCreate, form, t\r\n    } = this.props;\r\n\r\n    const { getFieldDecorator } = form;\r\n\r\n    const formItemLayout = {\r\n      wrapperCol: {\r\n        xs: { span: 12 },\r\n        sm: { span: 14 },\r\n      },\r\n    };\r\n\r\n\r\n    return (\r\n      <Modal\r\n        visible={visible}\r\n        title={t('buttons.addManager')}\r\n        okText={t('Add')}\r\n        cancelText={t('Cancel')}\r\n        onCancel={onCancel}\r\n        onOk={onCreate}\r\n      >\r\n        <Form layout='vertical'>\r\n\r\n          <FormItem {...formItemLayout} label={t('Email')}>\r\n            {getFieldDecorator('email', {\r\n              rules: [\r\n                { required: true, message: t('This field is required') }\r\n              ],\r\n            })(<Input placeholder='email@gmail.com' />)}\r\n          </FormItem>\r\n\r\n          <FormItem {...formItemLayout} label={t('Nickname')}>\r\n            {getFieldDecorator('nickname', {\r\n              rules: [\r\n                { required: true, message: t('This field is required') }\r\n              ],\r\n            })(<Input placeholder='BestNickname' />)}\r\n          </FormItem>\r\n\r\n          <FormItem {...formItemLayout} label={t('Password')}>\r\n            {getFieldDecorator('password', {\r\n              rules: [\r\n                { required: true, message: t('This field is required') }\r\n              ],\r\n            })(<Input placeholder='*********' type='password' />)}\r\n          </FormItem>\r\n\r\n        </Form>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form.create()(AddManagerForm);","import React from 'react';\r\nimport { Table, Button, Modal } from 'antd';\r\nimport AddManagerForm from './forms/managers/addManagerForm';\r\nconst confirm = Modal.confirm;\r\n\r\nexport default class ManagersList extends React.Component {\r\n  state = {\r\n    size: 'small',\r\n    managers: [],\r\n    visible: false,\r\n  }\r\n\r\n  showConfirm(obj) {\r\n    let { removeManager, t } = this.props;\r\n    confirm({\r\n      title: t('Do you want to delete manager?'),\r\n      okText: t('Yes'),\r\n      cancelText: t('Cancel'),\r\n      onOk() {\r\n        removeManager(obj);\r\n      },\r\n      onCancel() {\r\n      },\r\n    });\r\n  }\r\n\r\n  showModal = () => {\r\n    this.setState({ visible: true });\r\n  }\r\n\r\n  handleCancel = () => {\r\n    this.setState({ visible: false });\r\n  }\r\n\r\n  handleCreate = (e) => {\r\n    const form = this.formRef.props.form;\r\n    e.preventDefault();\r\n    form.validateFields((err, values) => {\r\n      if (!err) {\r\n        this.props.addManager(values);\r\n        form.resetFields();\r\n        this.setState({ visible: false });\r\n      }\r\n    });\r\n  }\r\n\r\n  saveFormRef = (formRef) => {\r\n    this.formRef = formRef;\r\n  }\r\n\r\n  render() {\r\n    let { t } = this.props;\r\n    let columns = [\r\n      { title: '', dataIndex: 'number', key: 'number' },\r\n      { title: t('Email'), dataIndex: 'email', key: 'email' },\r\n      { title: t('Nickname'), key: 'nickname', dataIndex: 'nickname' },\r\n      {\r\n        title: t('Action'), dataIndex: '', key: '', render: (obj) => {\r\n          async function removeManager() {\r\n            try {\r\n              this.showConfirm(obj);\r\n            } catch (err) {\r\n              throw err;\r\n            }\r\n          }\r\n          return <Button onClick={removeManager.bind(this)} type=\"danger\">{t('Delete')}</Button>\r\n        }, fixed: 'right', width: 100\r\n      }\r\n    ];\r\n    return (\r\n      <div>\r\n        <Button type=\"primary\" onClick={this.showModal} style={{ marginBottom: \"20px\" }}>\r\n          {t('buttons.addManager')}\r\n        </Button>\r\n        <Table {...this.state} columns={columns} dataSource={this.props.app.managers} />\r\n        <AddManagerForm\r\n          wrappedComponentRef={this.saveFormRef}\r\n          visible={this.state.visible}\r\n          onCancel={this.handleCancel}\r\n          onCreate={this.handleCreate}\r\n          {... this.props}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport Managers from './Managers';\r\n\r\nexport default class ManagersListView extends React.Component {\r\n  componentDidMount() {\r\n    this.props.fetchManagers();\r\n  }\r\n  render() {\r\n    return <Managers\r\n      {... this.props}\r\n    />;\r\n  }\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ManagersView from '../../components/ManagersView';\r\nimport { fetchManagers, addManager, removeManager } from '../../actions/settings';\r\nimport { withNamespaces } from 'react-i18next';\r\n\r\nconst Managers = (props) => {\r\n    return <ManagersView {...props} />;\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        app: state.app\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    return {\r\n        fetchManagers: () => { dispatch(fetchManagers()) },\r\n        addManager: (data) => { dispatch(addManager(data)) },\r\n        removeManager: (data) => { dispatch(removeManager(data)) }\r\n    }\r\n}\r\n\r\nexport default withNamespaces()(connect(mapStateToProps, mapDispatchToProps)(Managers));","import React from 'react';\r\nimport {\r\n  Table, Button, Row, Col\r\n} from 'antd';\r\n\r\nexport default class RequestsListView extends React.Component {\r\n\r\n  state = {\r\n    loading: false,\r\n    msgsIdToDelete: []\r\n  }\r\n\r\n  deleteRequest = async (data) => {\r\n    try {\r\n      this.setState({\r\n        loading: true\r\n      })\r\n      this.props.deleteRequest(data);\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  rowSelection = {\r\n    onChange: async (selectedRowKeys, selectedRows) => {\r\n      await this.setState({\r\n        msgsIdToDelete: selectedRows\r\n      });\r\n    },\r\n    getCheckboxProps: record => ({\r\n      disabled: record.name === 'Disabled User', // Column configuration not to be checked\r\n      name: record.name,\r\n    }),\r\n  };\r\n\r\n  componentWillReceiveProps() {\r\n    if (this.props.app.requests) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { t } = this.props;\r\n    let columns = [{\r\n      title: t('Message'),\r\n      render: (item) => {\r\n        return (\r\n          <div>\r\n            <Row>\r\n              <Col span={3}><b>: {item.u.username}</b></Col>\r\n            </Row>\r\n            <Row>\r\n              <Col span={24}>{item.msg}</Col>\r\n            </Row>\r\n            <br />\r\n            <Row>\r\n              <Col style={{ fontSize: \"0.5em\", color: \"grey\" }} span={3}>{item.ts}</Col>\r\n            </Row>\r\n          </div>\r\n        );\r\n      },\r\n      key: 'msg',\r\n    }, {\r\n      title: t('Action'),\r\n      key: '_id',\r\n      render: (item) => {\r\n        function del() {\r\n          if (this.state.msgsIdToDelete.length > 0) {\r\n            this.deleteRequest(this.state.msgsIdToDelete);\r\n          } else {\r\n            this.deleteRequest(item);\r\n          }\r\n        }\r\n        return (<Button onClick={del.bind(this)} type=\"danger\">{t('Delete')}</Button>)\r\n      },\r\n      fixed: 'right',\r\n      width: 100\r\n    }];\r\n\r\n    return <Table\r\n      rowSelection={this.rowSelection}\r\n      scroll={{ x: 1800 }}\r\n      pagination={{ hideOnSinglePage: true }}\r\n      loading={this.state.loading}\r\n      columns={columns}\r\n      dataSource={this.props.app.requests} />;\r\n  }\r\n}","import React from 'react';\r\nimport Requests from './Requests';\r\n\r\nexport default class SettinggsView extends React.Component {\r\n  componentDidMount() {\r\n    this.props.fetchRequests();\r\n  }\r\n  render() {\r\n    return <Requests\r\n      {... this.props}\r\n    />\r\n  }\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport RequestsView from '../../components/RequestsView';\r\nimport { fetchRequests, deleteRequest } from '../../actions/settings';\r\nimport { withNamespaces } from 'react-i18next';\r\n\r\nconst Settings = (props) => {\r\n    return <RequestsView {...props} />;\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        app: state.app\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    return {\r\n        fetchRequests: (data) => { dispatch(fetchRequests(data)) },\r\n        deleteRequest: (data) => { dispatch(deleteRequest(data)) }\r\n    }\r\n}\r\n\r\nexport default withNamespaces()(connect(mapStateToProps, mapDispatchToProps)(Settings));","import React from 'react';\r\nimport { history } from './store';\r\nimport { ConnectedRouter } from \"react-router-redux\";\r\nimport { Route } from \"react-router\";\r\nimport PrivateRoute from './containers/PrivateRouter';\r\n\r\nimport MainPage from './containers/MainPage';\r\nimport Wrapper from './components/Wrapper';\r\n\r\nimport Authorize from './containers/Authorize';\r\nimport Settings from './containers/Settings';\r\nimport Dialogs from './containers/Dialogs';\r\nimport Managers from './containers/Managers';\r\nimport Requests from './containers/Requests';\r\nimport { connect } from 'react-redux';\r\nimport { fetchSettings, saveSettings, fetchRole, loaderOff } from './actions/settings';\r\n\r\nclass Router extends React.Component {\r\n  componentDidMount() {\r\n    this.props.fetchRole();\r\n    this.props.loaderOff();\r\n    if (history.location.pathname === '/') {\r\n      history.push('/dialogs');\r\n    }\r\n  }\r\n  render() {\r\n    return <ConnectedRouter history={history}>\r\n      <div>\r\n        <Route path=\"/authorize\" exact component={Authorize} />\r\n        <Wrapper role={this.props.app.role} loader={this.props.app.loader}>\r\n          <PrivateRoute path='/' exact component={MainPage} />\r\n          <PrivateRoute path='/settings' exact component={Settings} />\r\n          <PrivateRoute path='/dialogs' exact component={Dialogs} />\r\n          <PrivateRoute path='/managers' exact component={Managers} />\r\n          <PrivateRoute path='/requests' exact component={Requests} />\r\n        </Wrapper>\r\n      </div>\r\n    </ConnectedRouter>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return {\r\n    app: state.app\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    fetchSettings: () => { dispatch(fetchSettings()) },\r\n    saveSettings: (data) => { dispatch(saveSettings(data)) },\r\n    fetchRole: () => { dispatch(fetchRole()) },\r\n    loaderOff: () => { dispatch(loaderOff()) }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Router);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './i18n';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store';\r\nimport Router from './router';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport './index.css'\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <Router />\r\n    </Provider>\r\n    , document.getElementById('root'));\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}